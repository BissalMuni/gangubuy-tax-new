"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/attachments/route";
exports.ids = ["app/api/attachments/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattachments%2Froute&page=%2Fapi%2Fattachments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattachments%2Froute.ts&appDir=C%3A%5CUsers%5Cuser%5CDownloads%5Ccoding%5Cgangubuy-tax-new%5Capp&pageExtensions=js&pageExtensions=jsx&pageExtensions=md&pageExtensions=mdx&pageExtensions=ts&pageExtensions=tsx&rootDir=C%3A%5CUsers%5Cuser%5CDownloads%5Ccoding%5Cgangubuy-tax-new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattachments%2Froute&page=%2Fapi%2Fattachments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattachments%2Froute.ts&appDir=C%3A%5CUsers%5Cuser%5CDownloads%5Ccoding%5Cgangubuy-tax-new%5Capp&pageExtensions=js&pageExtensions=jsx&pageExtensions=md&pageExtensions=mdx&pageExtensions=ts&pageExtensions=tsx&rootDir=C%3A%5CUsers%5Cuser%5CDownloads%5Ccoding%5Cgangubuy-tax-new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_user_Downloads_coding_gangubuy_tax_new_app_api_attachments_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/attachments/route.ts */ \"(rsc)/./app/api/attachments/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/attachments/route\",\n        pathname: \"/api/attachments\",\n        filename: \"route\",\n        bundlePath: \"app/api/attachments/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\user\\\\Downloads\\\\coding\\\\gangubuy-tax-new\\\\app\\\\api\\\\attachments\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_user_Downloads_coding_gangubuy_tax_new_app_api_attachments_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/attachments/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdHRhY2htZW50cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYXR0YWNobWVudHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhdHRhY2htZW50cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUN1c2VyJTVDRG93bmxvYWRzJTVDY29kaW5nJTVDZ2FuZ3VidXktdGF4LW5ldyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz1qcyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9bWQmcGFnZUV4dGVuc2lvbnM9bWR4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPXRzeCZyb290RGlyPUMlM0ElNUNVc2VycyU1Q3VzZXIlNUNEb3dubG9hZHMlNUNjb2RpbmclNUNnYW5ndWJ1eS10YXgtbmV3JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNxQztBQUNsSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2dhbmd1YnV5LXRheC1uZXcvP2FkZDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcdXNlclxcXFxEb3dubG9hZHNcXFxcY29kaW5nXFxcXGdhbmd1YnV5LXRheC1uZXdcXFxcYXBwXFxcXGFwaVxcXFxhdHRhY2htZW50c1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXR0YWNobWVudHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdHRhY2htZW50c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXR0YWNobWVudHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFx1c2VyXFxcXERvd25sb2Fkc1xcXFxjb2RpbmdcXFxcZ2FuZ3VidXktdGF4LW5ld1xcXFxhcHBcXFxcYXBpXFxcXGF0dGFjaG1lbnRzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdHRhY2htZW50cy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattachments%2Froute&page=%2Fapi%2Fattachments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattachments%2Froute.ts&appDir=C%3A%5CUsers%5Cuser%5CDownloads%5Ccoding%5Cgangubuy-tax-new%5Capp&pageExtensions=js&pageExtensions=jsx&pageExtensions=md&pageExtensions=mdx&pageExtensions=ts&pageExtensions=tsx&rootDir=C%3A%5CUsers%5Cuser%5CDownloads%5Ccoding%5Cgangubuy-tax-new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/attachments/route.ts":
/*!**************************************!*\
  !*** ./app/api/attachments/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_attachments__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/attachments */ \"(rsc)/./lib/supabase/attachments.ts\");\n\n\nasync function GET(request) {\n    const contentPath = request.nextUrl.searchParams.get(\"content_path\");\n    if (!contentPath) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"content_path is required\"\n        }, {\n            status: 400\n        });\n    }\n    try {\n        const data = await (0,_lib_supabase_attachments__WEBPACK_IMPORTED_MODULE_1__.getAttachments)(contentPath);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            data\n        });\n    } catch  {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"failed to fetch attachments\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    let formData;\n    try {\n        formData = await request.formData();\n    } catch  {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"invalid form data\"\n        }, {\n            status: 400\n        });\n    }\n    const file = formData.get(\"file\");\n    const contentPath = formData.get(\"content_path\");\n    const uploadedBy = formData.get(\"uploaded_by\");\n    if (!file || !contentPath || !uploadedBy) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"file, content_path, uploaded_by are required\"\n        }, {\n            status: 400\n        });\n    }\n    try {\n        const data = await (0,_lib_supabase_attachments__WEBPACK_IMPORTED_MODULE_1__.uploadAttachment)(file, contentPath.trim(), uploadedBy.trim());\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            data\n        }, {\n            status: 201\n        });\n    } catch (err) {\n        const message = err instanceof Error ? err.message : \"failed to upload\";\n        const status = message.includes(\"not allowed\") || message.includes(\"exceeds\") ? 400 : 500;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: message\n        }, {\n            status\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F0dGFjaG1lbnRzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDc0I7QUFFdkUsZUFBZUcsSUFBSUMsT0FBb0I7SUFDNUMsTUFBTUMsY0FBY0QsUUFBUUUsT0FBTyxDQUFDQyxZQUFZLENBQUNDLEdBQUcsQ0FBQztJQUVyRCxJQUFJLENBQUNILGFBQWE7UUFDaEIsT0FBT0wscURBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUEyQixHQUNwQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNWCx5RUFBY0EsQ0FBQ0k7UUFDbEMsT0FBT0wscURBQVlBLENBQUNTLElBQUksQ0FBQztZQUFFRztRQUFLO0lBQ2xDLEVBQUUsT0FBTTtRQUNOLE9BQU9aLHFEQUFZQSxDQUFDUyxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBOEIsR0FDdkM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFTyxlQUFlRSxLQUFLVCxPQUFvQjtJQUM3QyxJQUFJVTtJQUVKLElBQUk7UUFDRkEsV0FBVyxNQUFNVixRQUFRVSxRQUFRO0lBQ25DLEVBQUUsT0FBTTtRQUNOLE9BQU9kLHFEQUFZQSxDQUFDUyxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBb0IsR0FDN0I7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0lBRUEsTUFBTUksT0FBT0QsU0FBU04sR0FBRyxDQUFDO0lBQzFCLE1BQU1ILGNBQWNTLFNBQVNOLEdBQUcsQ0FBQztJQUNqQyxNQUFNUSxhQUFhRixTQUFTTixHQUFHLENBQUM7SUFFaEMsSUFBSSxDQUFDTyxRQUFRLENBQUNWLGVBQWUsQ0FBQ1csWUFBWTtRQUN4QyxPQUFPaEIscURBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUErQyxHQUN4RDtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNViwyRUFBZ0JBLENBQUNhLE1BQU1WLFlBQVlZLElBQUksSUFBSUQsV0FBV0MsSUFBSTtRQUM3RSxPQUFPakIscURBQVlBLENBQUNTLElBQUksQ0FBQztZQUFFRztRQUFLLEdBQUc7WUFBRUQsUUFBUTtRQUFJO0lBQ25ELEVBQUUsT0FBT08sS0FBSztRQUNaLE1BQU1DLFVBQVVELGVBQWVFLFFBQVFGLElBQUlDLE9BQU8sR0FBRztRQUNyRCxNQUFNUixTQUFTUSxRQUFRRSxRQUFRLENBQUMsa0JBQWtCRixRQUFRRSxRQUFRLENBQUMsYUFBYSxNQUFNO1FBQ3RGLE9BQU9yQixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQUVDLE9BQU9TO1FBQVEsR0FBRztZQUFFUjtRQUFPO0lBQ3hEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW5ndWJ1eS10YXgtbmV3Ly4vYXBwL2FwaS9hdHRhY2htZW50cy9yb3V0ZS50cz9jYzEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGdldEF0dGFjaG1lbnRzLCB1cGxvYWRBdHRhY2htZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2UvYXR0YWNobWVudHMnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IGNvbnRlbnRQYXRoID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2NvbnRlbnRfcGF0aCcpO1xyXG5cclxuICBpZiAoIWNvbnRlbnRQYXRoKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdjb250ZW50X3BhdGggaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA0MDAgfSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEF0dGFjaG1lbnRzKGNvbnRlbnRQYXRoKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGRhdGEgfSk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdmYWlsZWQgdG8gZmV0Y2ggYXR0YWNobWVudHMnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfSxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGxldCBmb3JtRGF0YTogRm9ybURhdGE7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ2ludmFsaWQgZm9ybSBkYXRhJyB9LFxyXG4gICAgICB7IHN0YXR1czogNDAwIH0sXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpIGFzIEZpbGUgfCBudWxsO1xyXG4gIGNvbnN0IGNvbnRlbnRQYXRoID0gZm9ybURhdGEuZ2V0KCdjb250ZW50X3BhdGgnKSBhcyBzdHJpbmcgfCBudWxsO1xyXG4gIGNvbnN0IHVwbG9hZGVkQnkgPSBmb3JtRGF0YS5nZXQoJ3VwbG9hZGVkX2J5JykgYXMgc3RyaW5nIHwgbnVsbDtcclxuXHJcbiAgaWYgKCFmaWxlIHx8ICFjb250ZW50UGF0aCB8fCAhdXBsb2FkZWRCeSkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnZmlsZSwgY29udGVudF9wYXRoLCB1cGxvYWRlZF9ieSBhcmUgcmVxdWlyZWQnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA0MDAgfSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwbG9hZEF0dGFjaG1lbnQoZmlsZSwgY29udGVudFBhdGgudHJpbSgpLCB1cGxvYWRlZEJ5LnRyaW0oKSk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBkYXRhIH0sIHsgc3RhdHVzOiAyMDEgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdmYWlsZWQgdG8gdXBsb2FkJztcclxuICAgIGNvbnN0IHN0YXR1cyA9IG1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBhbGxvd2VkJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnZXhjZWVkcycpID8gNDAwIDogNTAwO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IG1lc3NhZ2UgfSwgeyBzdGF0dXMgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRBdHRhY2htZW50cyIsInVwbG9hZEF0dGFjaG1lbnQiLCJHRVQiLCJyZXF1ZXN0IiwiY29udGVudFBhdGgiLCJuZXh0VXJsIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiZGF0YSIsIlBPU1QiLCJmb3JtRGF0YSIsImZpbGUiLCJ1cGxvYWRlZEJ5IiwidHJpbSIsImVyciIsIm1lc3NhZ2UiLCJFcnJvciIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/attachments/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/attachments.ts":
/*!*************************************!*\
  !*** ./lib/supabase/attachments.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteAttachment: () => (/* binding */ deleteAttachment),\n/* harmony export */   getAttachments: () => (/* binding */ getAttachments),\n/* harmony export */   uploadAttachment: () => (/* binding */ uploadAttachment)\n/* harmony export */ });\n/* harmony import */ var _server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./server */ \"(rsc)/./lib/supabase/server.ts\");\n/* harmony import */ var _lib_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/types */ \"(rsc)/./lib/types/index.ts\");\n\n\nconst BUCKET_NAME = \"attachments\";\nasync function getAttachments(contentPath) {\n    const supabase = (0,_server__WEBPACK_IMPORTED_MODULE_0__.getSupabase)();\n    const { data, error } = await supabase.from(\"attachments\").select(\"*\").eq(\"content_path\", contentPath).order(\"created_at\", {\n        ascending: false\n    });\n    if (error) throw error;\n    // Add download URLs\n    return (data || []).map((item)=>({\n            ...item,\n            download_url: supabase.storage.from(BUCKET_NAME).getPublicUrl(item.storage_path).data.publicUrl\n        }));\n}\nasync function uploadAttachment(file, contentPath, uploadedBy) {\n    // Validate file size\n    if (file.size > _lib_types__WEBPACK_IMPORTED_MODULE_1__.MAX_FILE_SIZE) {\n        throw new Error(\"file size exceeds 10MB limit\");\n    }\n    // Validate MIME type\n    if (!_lib_types__WEBPACK_IMPORTED_MODULE_1__.ALLOWED_MIME_TYPES.includes(file.type)) {\n        throw new Error(\"file type not allowed. Allowed: pdf, xlsx, xls, doc, docx, hwp, jpg, jpeg, png, gif\");\n    }\n    const supabase = (0,_server__WEBPACK_IMPORTED_MODULE_0__.getSupabase)();\n    const uuid = crypto.randomUUID();\n    const ext = file.name.includes(\".\") ? file.name.split(\".\").pop() : \"\";\n    const storagePath = `${contentPath}/${uuid}${ext ? `.${ext}` : \"\"}`;\n    // Upload to Storage\n    const buffer = Buffer.from(await file.arrayBuffer());\n    const { error: uploadError } = await supabase.storage.from(BUCKET_NAME).upload(storagePath, buffer, {\n        contentType: file.type\n    });\n    if (uploadError) throw uploadError;\n    // Save metadata to DB\n    const { data, error: insertError } = await supabase.from(\"attachments\").insert({\n        content_path: contentPath,\n        file_name: file.name,\n        storage_path: storagePath,\n        file_size: file.size,\n        mime_type: file.type,\n        uploaded_by: uploadedBy\n    }).select().single();\n    if (insertError) {\n        // Cleanup: remove uploaded file if DB insert fails\n        await supabase.storage.from(BUCKET_NAME).remove([\n            storagePath\n        ]);\n        throw insertError;\n    }\n    const downloadUrl = supabase.storage.from(BUCKET_NAME).getPublicUrl(storagePath).data.publicUrl;\n    return {\n        ...data,\n        download_url: downloadUrl\n    };\n}\nasync function deleteAttachment(id, uploadedBy) {\n    const supabase = (0,_server__WEBPACK_IMPORTED_MODULE_0__.getSupabase)();\n    // Fetch the attachment\n    const { data: existing, error: fetchError } = await supabase.from(\"attachments\").select(\"*\").eq(\"id\", id).single();\n    if (fetchError || !existing) {\n        return {\n            success: false,\n            error: \"attachment not found\"\n        };\n    }\n    if (existing.uploaded_by !== uploadedBy) {\n        return {\n            success: false,\n            error: \"only the uploader can delete this attachment\"\n        };\n    }\n    // Delete from Storage\n    await supabase.storage.from(BUCKET_NAME).remove([\n        existing.storage_path\n    ]);\n    // Delete from DB\n    const { error: deleteError } = await supabase.from(\"attachments\").delete().eq(\"id\", id);\n    if (deleteError) throw deleteError;\n    return {\n        success: true\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3ZCLE1BQU0sRUFBRU8sTUFBTStDLFFBQVEsRUFBRTlDLE9BQU8rQyxVQUFVLEVBQUUsR0FBRyxNQUFNakQsU0FDakRHLElBQUksQ0FBQyxlQUNMQyxNQUFNLENBQUMsS0FDUEMsRUFBRSxDQUFDLE1BQU0wQyxJQUNUSixNQUFNO0lBRVQsSUFBSU0sY0FBYyxDQUFDRCxVQUFVO1FBQzNCLE9BQU87WUFBRUUsU0FBUztZQUFPaEQsT0FBTztRQUF1QjtJQUN6RDtJQUVBLElBQUk4QyxTQUFTTixXQUFXLEtBQUt6QixZQUFZO1FBQ3ZDLE9BQU87WUFBRWlDLFNBQVM7WUFBT2hELE9BQU87UUFBK0M7SUFDakY7SUFFQSxzQkFBc0I7SUFDdEIsTUFBTUYsU0FBU1csT0FBTyxDQUFDUixJQUFJLENBQUNOLGFBQWErQyxNQUFNLENBQUM7UUFBQ0ksU0FBU25DLFlBQVk7S0FBQztJQUV2RSxpQkFBaUI7SUFDakIsTUFBTSxFQUFFWCxPQUFPaUQsV0FBVyxFQUFFLEdBQUcsTUFBTW5ELFNBQ2xDRyxJQUFJLENBQUMsZUFDTGlELE1BQU0sR0FDTi9DLEVBQUUsQ0FBQyxNQUFNMEM7SUFFWixJQUFJSSxhQUFhLE1BQU1BO0lBQ3ZCLE9BQU87UUFBRUQsU0FBUztJQUFLO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FuZ3VidXktdGF4LW5ldy8uL2xpYi9zdXBhYmFzZS9hdHRhY2htZW50cy50cz8yM2Q0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFN1cGFiYXNlIH0gZnJvbSAnLi9zZXJ2ZXInO1xyXG5pbXBvcnQgdHlwZSB7IEF0dGFjaG1lbnQgfSBmcm9tICdAL2xpYi90eXBlcyc7XHJcbmltcG9ydCB7IEFMTE9XRURfTUlNRV9UWVBFUywgTUFYX0ZJTEVfU0laRSB9IGZyb20gJ0AvbGliL3R5cGVzJztcclxuXHJcbmNvbnN0IEJVQ0tFVF9OQU1FID0gJ2F0dGFjaG1lbnRzJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdHRhY2htZW50cyhjb250ZW50UGF0aDogc3RyaW5nKTogUHJvbWlzZTxBdHRhY2htZW50W10+IHtcclxuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlKCk7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdhdHRhY2htZW50cycpXHJcbiAgICAuc2VsZWN0KCcqJylcclxuICAgIC5lcSgnY29udGVudF9wYXRoJywgY29udGVudFBhdGgpXHJcbiAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcblxyXG4gIC8vIEFkZCBkb3dubG9hZCBVUkxzXHJcbiAgcmV0dXJuIChkYXRhIHx8IFtdKS5tYXAoKGl0ZW0pID0+ICh7XHJcbiAgICAuLi5pdGVtLFxyXG4gICAgZG93bmxvYWRfdXJsOiBzdXBhYmFzZS5zdG9yYWdlXHJcbiAgICAgIC5mcm9tKEJVQ0tFVF9OQU1FKVxyXG4gICAgICAuZ2V0UHVibGljVXJsKGl0ZW0uc3RvcmFnZV9wYXRoKS5kYXRhLnB1YmxpY1VybCxcclxuICB9KSkgYXMgQXR0YWNobWVudFtdO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkQXR0YWNobWVudChcclxuICBmaWxlOiBGaWxlLFxyXG4gIGNvbnRlbnRQYXRoOiBzdHJpbmcsXHJcbiAgdXBsb2FkZWRCeTogc3RyaW5nLFxyXG4pOiBQcm9taXNlPEF0dGFjaG1lbnQ+IHtcclxuICAvLyBWYWxpZGF0ZSBmaWxlIHNpemVcclxuICBpZiAoZmlsZS5zaXplID4gTUFYX0ZJTEVfU0laRSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdmaWxlIHNpemUgZXhjZWVkcyAxME1CIGxpbWl0Jyk7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBNSU1FIHR5cGVcclxuICBpZiAoIUFMTE9XRURfTUlNRV9UWVBFUy5pbmNsdWRlcyhmaWxlLnR5cGUgYXMgKHR5cGVvZiBBTExPV0VEX01JTUVfVFlQRVMpW251bWJlcl0pKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICdmaWxlIHR5cGUgbm90IGFsbG93ZWQuIEFsbG93ZWQ6IHBkZiwgeGxzeCwgeGxzLCBkb2MsIGRvY3gsIGh3cCwganBnLCBqcGVnLCBwbmcsIGdpZicsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZSgpO1xyXG4gIGNvbnN0IHV1aWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xyXG4gIGNvbnN0IGV4dCA9IGZpbGUubmFtZS5pbmNsdWRlcygnLicpID8gZmlsZS5uYW1lLnNwbGl0KCcuJykucG9wKCkgOiAnJztcclxuICBjb25zdCBzdG9yYWdlUGF0aCA9IGAke2NvbnRlbnRQYXRofS8ke3V1aWR9JHtleHQgPyBgLiR7ZXh0fWAgOiAnJ31gO1xyXG5cclxuICAvLyBVcGxvYWQgdG8gU3RvcmFnZVxyXG4gIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKSk7XHJcbiAgY29uc3QgeyBlcnJvcjogdXBsb2FkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgIC5mcm9tKEJVQ0tFVF9OQU1FKVxyXG4gICAgLnVwbG9hZChzdG9yYWdlUGF0aCwgYnVmZmVyLCB7XHJcbiAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUsXHJcbiAgICB9KTtcclxuXHJcbiAgaWYgKHVwbG9hZEVycm9yKSB0aHJvdyB1cGxvYWRFcnJvcjtcclxuXHJcbiAgLy8gU2F2ZSBtZXRhZGF0YSB0byBEQlxyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2F0dGFjaG1lbnRzJylcclxuICAgIC5pbnNlcnQoe1xyXG4gICAgICBjb250ZW50X3BhdGg6IGNvbnRlbnRQYXRoLFxyXG4gICAgICBmaWxlX25hbWU6IGZpbGUubmFtZSxcclxuICAgICAgc3RvcmFnZV9wYXRoOiBzdG9yYWdlUGF0aCxcclxuICAgICAgZmlsZV9zaXplOiBmaWxlLnNpemUsXHJcbiAgICAgIG1pbWVfdHlwZTogZmlsZS50eXBlLFxyXG4gICAgICB1cGxvYWRlZF9ieTogdXBsb2FkZWRCeSxcclxuICAgIH0pXHJcbiAgICAuc2VsZWN0KClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGluc2VydEVycm9yKSB7XHJcbiAgICAvLyBDbGVhbnVwOiByZW1vdmUgdXBsb2FkZWQgZmlsZSBpZiBEQiBpbnNlcnQgZmFpbHNcclxuICAgIGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbShCVUNLRVRfTkFNRSkucmVtb3ZlKFtzdG9yYWdlUGF0aF0pO1xyXG4gICAgdGhyb3cgaW5zZXJ0RXJyb3I7XHJcbiAgfVxyXG5cclxuICBjb25zdCBkb3dubG9hZFVybCA9IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgIC5mcm9tKEJVQ0tFVF9OQU1FKVxyXG4gICAgLmdldFB1YmxpY1VybChzdG9yYWdlUGF0aCkuZGF0YS5wdWJsaWNVcmw7XHJcblxyXG4gIHJldHVybiB7IC4uLmRhdGEsIGRvd25sb2FkX3VybDogZG93bmxvYWRVcmwgfSBhcyBBdHRhY2htZW50O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXR0YWNobWVudChcclxuICBpZDogc3RyaW5nLFxyXG4gIHVwbG9hZGVkQnk6IHN0cmluZyxcclxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcclxuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlKCk7XHJcblxyXG4gIC8vIEZldGNoIHRoZSBhdHRhY2htZW50XHJcbiAgY29uc3QgeyBkYXRhOiBleGlzdGluZywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnYXR0YWNobWVudHMnKVxyXG4gICAgLnNlbGVjdCgnKicpXHJcbiAgICAuZXEoJ2lkJywgaWQpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmIChmZXRjaEVycm9yIHx8ICFleGlzdGluZykge1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnYXR0YWNobWVudCBub3QgZm91bmQnIH07XHJcbiAgfVxyXG5cclxuICBpZiAoZXhpc3RpbmcudXBsb2FkZWRfYnkgIT09IHVwbG9hZGVkQnkpIHtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ29ubHkgdGhlIHVwbG9hZGVyIGNhbiBkZWxldGUgdGhpcyBhdHRhY2htZW50JyB9O1xyXG4gIH1cclxuXHJcbiAgLy8gRGVsZXRlIGZyb20gU3RvcmFnZVxyXG4gIGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbShCVUNLRVRfTkFNRSkucmVtb3ZlKFtleGlzdGluZy5zdG9yYWdlX3BhdGhdKTtcclxuXHJcbiAgLy8gRGVsZXRlIGZyb20gREJcclxuICBjb25zdCB7IGVycm9yOiBkZWxldGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdhdHRhY2htZW50cycpXHJcbiAgICAuZGVsZXRlKClcclxuICAgIC5lcSgnaWQnLCBpZCk7XHJcblxyXG4gIGlmIChkZWxldGVFcnJvcikgdGhyb3cgZGVsZXRlRXJyb3I7XHJcbiAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJnZXRTdXBhYmFzZSIsIkFMTE9XRURfTUlNRV9UWVBFUyIsIk1BWF9GSUxFX1NJWkUiLCJCVUNLRVRfTkFNRSIsImdldEF0dGFjaG1lbnRzIiwiY29udGVudFBhdGgiLCJzdXBhYmFzZSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibWFwIiwiaXRlbSIsImRvd25sb2FkX3VybCIsInN0b3JhZ2UiLCJnZXRQdWJsaWNVcmwiLCJzdG9yYWdlX3BhdGgiLCJwdWJsaWNVcmwiLCJ1cGxvYWRBdHRhY2htZW50IiwiZmlsZSIsInVwbG9hZGVkQnkiLCJzaXplIiwiRXJyb3IiLCJpbmNsdWRlcyIsInR5cGUiLCJ1dWlkIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImV4dCIsIm5hbWUiLCJzcGxpdCIsInBvcCIsInN0b3JhZ2VQYXRoIiwiYnVmZmVyIiwiQnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJ1cGxvYWRFcnJvciIsInVwbG9hZCIsImNvbnRlbnRUeXBlIiwiaW5zZXJ0RXJyb3IiLCJpbnNlcnQiLCJjb250ZW50X3BhdGgiLCJmaWxlX25hbWUiLCJmaWxlX3NpemUiLCJtaW1lX3R5cGUiLCJ1cGxvYWRlZF9ieSIsInNpbmdsZSIsInJlbW92ZSIsImRvd25sb2FkVXJsIiwiZGVsZXRlQXR0YWNobWVudCIsImlkIiwiZXhpc3RpbmciLCJmZXRjaEVycm9yIiwic3VjY2VzcyIsImRlbGV0ZUVycm9yIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/attachments.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSupabase: () => (/* binding */ getSupabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n\nlet _supabase = null;\nfunction getSupabase() {\n    if (_supabase) return _supabase;\n    const supabaseUrl = process.env.SUPABASE_URL;\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    if (!supabaseUrl || !supabaseServiceKey) {\n        throw new Error(\"Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY environment variables\");\n    }\n    _supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\n    return _supabase;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBFO0FBRTFFLElBQUlDLFlBQW1DO0FBRWhDLFNBQVNDO0lBQ2QsSUFBSUQsV0FBVyxPQUFPQTtJQUV0QixNQUFNRSxjQUFjQyxRQUFRQyxHQUFHLENBQUNDLFlBQVk7SUFDNUMsTUFBTUMscUJBQXFCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtJQUVoRSxJQUFJLENBQUNMLGVBQWUsQ0FBQ0ksb0JBQW9CO1FBQ3ZDLE1BQU0sSUFBSUUsTUFDUjtJQUVKO0lBRUFSLFlBQVlELG1FQUFZQSxDQUFDRyxhQUFhSTtJQUN0QyxPQUFPTjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FuZ3VidXktdGF4LW5ldy8uL2xpYi9zdXBhYmFzZS9zZXJ2ZXIudHM/NjYyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQsIHR5cGUgU3VwYWJhc2VDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5cclxubGV0IF9zdXBhYmFzZTogU3VwYWJhc2VDbGllbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdXBhYmFzZSgpOiBTdXBhYmFzZUNsaWVudCB7XHJcbiAgaWYgKF9zdXBhYmFzZSkgcmV0dXJuIF9zdXBhYmFzZTtcclxuXHJcbiAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkw7XHJcbiAgY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcclxuXHJcbiAgaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VTZXJ2aWNlS2V5KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICdNaXNzaW5nIFNVUEFCQVNFX1VSTCBvciBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlcycsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3N1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXkpO1xyXG4gIHJldHVybiBfc3VwYWJhc2U7XHJcbn1cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsIl9zdXBhYmFzZSIsImdldFN1cGFiYXNlIiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ }),

/***/ "(rsc)/./lib/types/index.ts":
/*!****************************!*\
  !*** ./lib/types/index.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALLOWED_MIME_TYPES: () => (/* binding */ ALLOWED_MIME_TYPES),\n/* harmony export */   DEFAULT_FONT_SIZE: () => (/* binding */ DEFAULT_FONT_SIZE),\n/* harmony export */   FONT_SIZE_STEP: () => (/* binding */ FONT_SIZE_STEP),\n/* harmony export */   MAX_FILE_SIZE: () => (/* binding */ MAX_FILE_SIZE),\n/* harmony export */   MAX_FONT_SIZE: () => (/* binding */ MAX_FONT_SIZE),\n/* harmony export */   MIN_FONT_SIZE: () => (/* binding */ MIN_FONT_SIZE)\n/* harmony export */ });\nconst MIN_FONT_SIZE = 12;\nconst MAX_FONT_SIZE = 22;\nconst FONT_SIZE_STEP = 1;\nconst DEFAULT_FONT_SIZE = 15;\nconst ALLOWED_MIME_TYPES = [\n    \"application/pdf\",\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    \"application/vnd.ms-excel\",\n    \"application/msword\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"application/haansofthwp\",\n    \"image/jpeg\",\n    \"image/png\",\n    \"image/gif\"\n];\nconst MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdHlwZXMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBeURPLE1BQU1BLGdCQUFnQixHQUFHO0FBQ3pCLE1BQU1DLGdCQUFnQixHQUFHO0FBQ3pCLE1BQU1DLGlCQUFpQixFQUFFO0FBQ3pCLE1BQU1DLG9CQUFvQixHQUFHO0FBMkM3QixNQUFNQyxxQkFBcUI7SUFDaEM7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0QsQ0FBVTtBQUVKLE1BQU1DLGdCQUFnQixLQUFLLE9BQU8sS0FBSyxDQUFDLE9BQU8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW5ndWJ1eS10YXgtbmV3Ly4vbGliL3R5cGVzL2luZGV4LnRzP2M5MTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XHJcblxyXG4vLyA9PT0gTmF2aWdhdGlvbiA9PT1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTmF2aWdhdGlvbk5vZGUge1xyXG4gIGxhYmVsOiBzdHJpbmc7XHJcbiAgcGF0aDogc3RyaW5nO1xyXG4gIGljb24/OiBzdHJpbmc7XHJcbiAgY2hpbGRyZW4/OiBSZWNvcmQ8c3RyaW5nLCBOYXZpZ2F0aW9uTm9kZT47XHJcbiAgaXNDYXRlZ29yeT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTmF2aWdhdGlvbkNvbmZpZyB7XHJcbiAgaG9tZTogTmF2aWdhdGlvbk5vZGU7XHJcbiAgYWNxdWlzaXRpb246IE5hdmlnYXRpb25Ob2RlO1xyXG4gIHByb3BlcnR5OiBOYXZpZ2F0aW9uTm9kZTtcclxuICB2ZWhpY2xlOiBOYXZpZ2F0aW9uTm9kZTtcclxuICBzZWFyY2g6IE5hdmlnYXRpb25Ob2RlO1xyXG59XHJcblxyXG4vLyA9PT0gQ29udGVudCA9PT1cclxuXHJcbmV4cG9ydCB0eXBlIFRheENhdGVnb3J5ID0gJ2FjcXVpc2l0aW9uJyB8ICdwcm9wZXJ0eScgfCAndmVoaWNsZSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRNZXRhIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICBjYXRlZ29yeTogVGF4Q2F0ZWdvcnk7XHJcbiAgdmVyc2lvbjogc3RyaW5nO1xyXG4gIGxhc3RVcGRhdGVkOiBzdHJpbmc7XHJcbiAgbGVnYWxCYXNpcz86IHN0cmluZztcclxuICBhdWRpZW5jZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50SXRlbSB7XHJcbiAgbWV0YTogQ29udGVudE1ldGE7XHJcbiAgY29udGVudDogUmVhY3ROb2RlO1xyXG4gIHJhd1NvdXJjZTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRWZXJzaW9uIHtcclxuICB2ZXJzaW9uOiBzdHJpbmc7XHJcbiAgbGFzdFVwZGF0ZWQ6IHN0cmluZztcclxuICBmaWxlUGF0aDogc3RyaW5nO1xyXG4gIGlzTGF0ZXN0OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRTZXF1ZW5jZSB7XHJcbiAgY2F0ZWdvcnk6IFRheENhdGVnb3J5O1xyXG4gIHNlcXVlbmNlOiBzdHJpbmdbXTtcclxufVxyXG5cclxuLy8gPT09IFVzZXIgUHJlZmVyZW5jZXMgPT09XHJcblxyXG5leHBvcnQgdHlwZSBGb250U2l6ZSA9IG51bWJlcjsgLy8gcHgg64uo7JyELCBNSU5fRk9OVF9TSVpFIH4gTUFYX0ZPTlRfU0laRVxyXG5cclxuZXhwb3J0IGNvbnN0IE1JTl9GT05UX1NJWkUgPSAxMjtcclxuZXhwb3J0IGNvbnN0IE1BWF9GT05UX1NJWkUgPSAyMjtcclxuZXhwb3J0IGNvbnN0IEZPTlRfU0laRV9TVEVQID0gMTtcclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfRk9OVF9TSVpFID0gMTU7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJQcmVmZXJlbmNlcyB7XHJcbiAgZm9udFNpemU6IEZvbnRTaXplO1xyXG4gIGV4cGFuZGVkTmF2S2V5czogc3RyaW5nW107XHJcbn1cclxuXHJcbi8vID09PSBTZWFyY2ggPT09XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaFJlc3VsdCB7XHJcbiAgaWQ6IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGNhdGVnb3J5OiBzdHJpbmc7XHJcbiAgcGF0aDogc3RyaW5nO1xyXG4gIHNuaXBwZXQ6IHN0cmluZztcclxuICBzY29yZTogbnVtYmVyO1xyXG59XHJcblxyXG4vLyA9PT0gQ29tbWVudHMgKFN1cGFiYXNlKSA9PT1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWVudCB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBjb250ZW50X3BhdGg6IHN0cmluZztcclxuICBhdXRob3I6IHN0cmluZztcclxuICBib2R5OiBzdHJpbmc7XHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcclxufVxyXG5cclxuLy8gPT09IEF0dGFjaG1lbnRzIChTdXBhYmFzZSkgPT09XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF0dGFjaG1lbnQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgY29udGVudF9wYXRoOiBzdHJpbmc7XHJcbiAgZmlsZV9uYW1lOiBzdHJpbmc7XHJcbiAgc3RvcmFnZV9wYXRoOiBzdHJpbmc7XHJcbiAgZmlsZV9zaXplOiBudW1iZXI7XHJcbiAgbWltZV90eXBlOiBzdHJpbmc7XHJcbiAgdXBsb2FkZWRfYnk6IHN0cmluZztcclxuICBjcmVhdGVkX2F0OiBzdHJpbmc7XHJcbiAgZG93bmxvYWRfdXJsPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQUxMT1dFRF9NSU1FX1RZUEVTID0gW1xyXG4gICdhcHBsaWNhdGlvbi9wZGYnLFxyXG4gICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcsXHJcbiAgJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCcsXHJcbiAgJ2FwcGxpY2F0aW9uL21zd29yZCcsXHJcbiAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50JyxcclxuICAnYXBwbGljYXRpb24vaGFhbnNvZnRod3AnLFxyXG4gICdpbWFnZS9qcGVnJyxcclxuICAnaW1hZ2UvcG5nJyxcclxuICAnaW1hZ2UvZ2lmJyxcclxuXSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCBjb25zdCBNQVhfRklMRV9TSVpFID0gMTAgKiAxMDI0ICogMTAyNDsgLy8gMTBNQlxyXG4iXSwibmFtZXMiOlsiTUlOX0ZPTlRfU0laRSIsIk1BWF9GT05UX1NJWkUiLCJGT05UX1NJWkVfU1RFUCIsIkRFRkFVTFRfRk9OVF9TSVpFIiwiQUxMT1dFRF9NSU1FX1RZUEVTIiwiTUFYX0ZJTEVfU0laRSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/types/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattachments%2Froute&page=%2Fapi%2Fattachments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattachments%2Froute.ts&appDir=C%3A%5CUsers%5Cuser%5CDownloads%5Ccoding%5Cgangubuy-tax-new%5Capp&pageExtensions=js&pageExtensions=jsx&pageExtensions=md&pageExtensions=mdx&pageExtensions=ts&pageExtensions=tsx&rootDir=C%3A%5CUsers%5Cuser%5CDownloads%5Ccoding%5Cgangubuy-tax-new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();