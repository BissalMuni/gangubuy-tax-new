# Feature Specification: 홈페이지 + 트리 메뉴 + 세금 정보 레이아웃

**Feature Branch**: `001-homepage-layout`
**Created**: 2026-01-30
**Status**: Draft
**Input**: User description: "홈페이지 + 좌측 트리 메뉴 + 우측 세금 정보 표시 레이아웃 구현"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 홈페이지 세금 정보 탐색 (Priority: P1)

사용자가 세금 정보 시스템에 접속하면 홈페이지가 표시된다. 홈페이지는 상단 헤더, 좌측 트리 네비게이션, 우측 콘텐츠 영역으로 구성된 3단 레이아웃을 제공한다. 사용자는 좌측 트리 메뉴에서 원하는 세금 항목을 선택하여 우측 영역에 해당 세금 정보를 확인할 수 있다.

**Why this priority**: 시스템의 핵심 구조이며, 이 레이아웃 없이는 다른 기능이 의미가 없다. 사용자가 세금 정보에 접근하는 기본 경로를 제공한다.

**Independent Test**: 브라우저에서 홈페이지에 접속하여 3단 레이아웃이 올바르게 표시되고, 트리 메뉴에서 항목을 클릭하면 우측에 해당 콘텐츠가 표시되는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 사용자가 시스템에 처음 접속, **When** 홈페이지가 로딩되면, **Then** 상단 헤더, 좌측 트리 메뉴, 우측 콘텐츠 영역이 포함된 3단 레이아웃이 표시된다
2. **Given** 홈페이지가 표시된 상태, **When** 좌측 트리 메뉴에서 "취득세 > 유상취득 > 주택 매매 > 1주택 취득" 항목을 선택하면, **Then** 우측 콘텐츠 영역에 해당 세금 정보(MDX 콘텐츠)가 렌더링된다
3. **Given** 홈페이지가 표시된 상태, **When** 아무 메뉴도 선택하지 않으면, **Then** 우측 영역에 홈페이지 기본 콘텐츠(시스템 소개 또는 안내 메시지)가 표시된다

---

### User Story 2 - 트리 메뉴 계층 탐색 (Priority: P1)

사용자가 좌측 트리 메뉴에서 상위 항목을 클릭하면 하위 항목이 펼쳐지거나 접힌다. 트리 구조를 통해 세금 정보의 계층적 분류를 직관적으로 탐색할 수 있다.

**Why this priority**: 트리 네비게이션은 레이아웃의 핵심 인터랙션이며, 세금 정보의 계층 구조를 탐색하는 유일한 방법이다.

**Independent Test**: 트리 메뉴의 상위 항목을 클릭하여 하위 항목이 펼쳐지고 접히는지, 선택된 항목이 시각적으로 구분되는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 트리 메뉴가 표시된 상태, **When** "취득세" 상위 항목을 클릭하면, **Then** 하위 항목(유상취득, 무상취득, 원시취득)이 펼쳐져 표시된다
2. **Given** 하위 항목이 펼쳐진 상태, **When** 동일한 상위 항목을 다시 클릭하면, **Then** 하위 항목이 접혀 숨겨진다
3. **Given** 트리 메뉴에서 리프 노드(최하위 항목)를 클릭, **When** 해당 항목이 선택되면, **Then** 선택된 항목이 시각적으로 강조(하이라이트)되고 우측에 콘텐츠가 표시된다

---

### User Story 3 - 반응형 레이아웃 (Priority: P2)

다양한 화면 크기(데스크톱, 태블릿, 모바일)에서 레이아웃이 적절히 조정된다. 모바일에서는 트리 메뉴가 별도의 토글 방식으로 접근할 수 있고, 데스크톱에서는 좌측에 고정 표시된다.

**Why this priority**: 다양한 기기에서의 접근성을 보장하지만, 기본 데스크톱 레이아웃이 먼저 동작해야 한다.

**Independent Test**: 브라우저 창 크기를 변경하며 레이아웃 전환이 올바르게 작동하는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 데스크톱 환경(너비 1024px 이상), **When** 페이지를 표시하면, **Then** 좌측에 트리 메뉴가 고정 표시되고 우측에 콘텐츠 영역이 나란히 배치된다
2. **Given** 태블릿 환경(너비 768px~1023px), **When** 페이지를 표시하면, **Then** 트리 메뉴가 접을 수 있는 사이드바로 표시된다
3. **Given** 모바일 환경(너비 768px 미만), **When** 페이지를 표시하면, **Then** 트리 메뉴가 숨겨지고 햄버거 메뉴 또는 별도 버튼으로 접근할 수 있다

---

### User Story 4 - 스크롤 위치 추적 (Priority: P3)

사용자가 우측 콘텐츠 영역을 스크롤하면, 좌측 트리 메뉴에서 현재 보고 있는 섹션에 해당하는 항목이 자동으로 강조된다.

**Why this priority**: 사용자 경험을 향상시키지만, 기본 레이아웃과 네비게이션이 먼저 구현되어야 한다.

**Independent Test**: 콘텐츠를 스크롤하면서 트리 메뉴의 하이라이트가 현재 섹션에 따라 변경되는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 긴 콘텐츠가 표시된 상태, **When** 사용자가 특정 섹션으로 스크롤하면, **Then** 좌측 트리 메뉴에서 해당 섹션에 대응하는 항목이 자동 강조된다
2. **Given** 스크롤 추적이 활성화된 상태, **When** 스크롤 추적을 지원하지 않는 환경이면, **Then** 기본 트리 메뉴 기능은 정상적으로 작동하되 자동 강조만 비활성화된다

---

### User Story 5 - 키보드 접근성 (Priority: P2)

키보드만으로 트리 메뉴를 탐색하고 콘텐츠를 선택할 수 있다. 화살표 키로 이동, Enter로 선택/토글, Tab으로 영역 간 이동이 가능하다.

**Why this priority**: 접근성은 프로젝트 헌법(WCAG 2.1 AA)에서 필수로 요구된다.

**Independent Test**: 키보드만으로 트리 메뉴를 탐색하고 콘텐츠를 선택하여 표시할 수 있는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 트리 메뉴에 포커스가 있는 상태, **When** 위/아래 화살표 키를 누르면, **Then** 트리 메뉴 항목 간 포커스가 이동한다
2. **Given** 상위 항목에 포커스가 있는 상태, **When** Enter 또는 오른쪽 화살표를 누르면, **Then** 하위 항목이 펼쳐진다
3. **Given** 리프 항목에 포커스가 있는 상태, **When** Enter를 누르면, **Then** 해당 콘텐츠가 우측 영역에 표시된다

---

### Edge Cases

- 콘텐츠가 없는 메뉴 항목을 선택하면 어떻게 되는가? → "준비중" 안내 메시지를 표시한다
- 트리 메뉴 데이터(navigation config) 로딩에 실패하면 어떻게 되는가? → 오류 메시지와 함께 기본 홈 콘텐츠를 표시한다
- MDX 콘텐츠 파싱에 오류가 발생하면 어떻게 되는가? → 사용자 친화적 오류 메시지를 표시하고 홈으로 돌아갈 수 있는 링크를 제공한다
- 깊이가 4단계 이상인 트리 구조에서 하위 항목이 많은 경우 → 스크롤 영역 내에서 트리 전체를 탐색할 수 있어야 한다
- 법적 고지사항이 모든 페이지에 표시되는가? → 레이아웃 하단 또는 콘텐츠 영역에 법적 고지사항이 항상 포함되어야 한다

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 시스템은 상단 헤더, 좌측 트리 네비게이션, 우측 콘텐츠 영역으로 구성된 3단 레이아웃을 제공해야 한다
- **FR-002**: 좌측 트리 메뉴는 외부 설정 파일에서 정의된 계층 구조를 기반으로 메뉴 항목을 표시해야 한다
- **FR-003**: 트리 메뉴의 상위 항목 클릭 시 하위 항목을 펼치거나 접을 수 있어야 한다
- **FR-004**: 트리 메뉴의 리프 노드 선택 시 해당하는 세금 정보 콘텐츠를 우측 영역에 표시해야 한다
- **FR-005**: 표시되는 세금 정보 콘텐츠는 MDX 파일에서 읽어와 렌더링해야 한다
- **FR-006**: 현재 선택된 메뉴 항목이 시각적으로 강조 표시되어야 한다
- **FR-007**: 메뉴를 선택하지 않은 초기 상태에서는 홈페이지 기본 콘텐츠를 표시해야 한다
- **FR-008**: 레이아웃은 데스크톱(1024px 이상), 태블릿(768px~1023px), 모바일(768px 미만)에서 적절히 조정되어야 한다
- **FR-009**: 모바일 환경에서 트리 메뉴는 별도의 토글 버튼으로 열고 닫을 수 있어야 한다
- **FR-010**: 트리 메뉴는 키보드(화살표 키, Enter, Tab)로 완전히 탐색 가능해야 한다
- **FR-011**: 콘텐츠 스크롤 시 현재 보고 있는 섹션에 대응하는 트리 메뉴 항목이 자동 강조되어야 한다
- **FR-012**: 콘텐츠가 없는 메뉴 항목 선택 시 "준비중" 안내 메시지를 표시해야 한다
- **FR-013**: 모든 페이지에 법적 고지사항("이 시스템은 정보 제공 목적으로만 사용되며...")이 표시되어야 한다
- **FR-014**: 헤더에는 시스템 이름이 표시되어야 한다

### Key Entities

- **네비게이션 트리 노드**: 메뉴 항목을 나타내며, 고유 식별자(id), 표시명(label), 콘텐츠 경로(contentPath), 하위 항목(children)을 가진다
- **세금 정보 콘텐츠**: MDX 파일로 저장된 세금 정보로, 제목, 버전, 시행일, 법적 근거 등의 메타데이터와 본문 내용을 가진다
- **버전 메타데이터**: 각 콘텐츠 디렉토리의 버전 이력을 관리하며, 현재 버전 표시 및 변경 이력을 가진다

## Assumptions

- 네비게이션 트리 구조는 `config/navigation.ts` 파일에서 정의되며, 이 파일은 별도로 관리된다
- MDX 콘텐츠 파일은 `content/` 디렉토리에 이미 존재하거나 이 피처와 함께 기본 샘플이 제공된다
- 콘텐츠 버전 관리 시 `_meta.json`의 `isCurrent: true`인 버전을 기본 표시한다
- 트리 메뉴의 최대 깊이는 실질적으로 제한하지 않으나, 현재 콘텐츠 기준 최대 5단계를 지원한다
- 초기 접속 시 트리 메뉴의 최상위 항목은 접힌 상태로 표시한다 (홈 제외)
- 법적 고지사항 문구는 프로젝트 헌법에 명시된 내용을 사용한다

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 사용자가 홈페이지 접속 후 원하는 세금 정보를 3번 이내의 클릭으로 찾을 수 있다
- **SC-002**: 페이지 초기 로딩 시 3단 레이아웃(헤더, 트리 메뉴, 콘텐츠)이 모두 표시되기까지 3초 이내에 완료된다 (3G 네트워크 기준)
- **SC-003**: 트리 메뉴 항목 선택 후 콘텐츠가 표시되기까지 사용자가 대기하는 시간이 1초 이내이다
- **SC-004**: 키보드만으로 모든 트리 메뉴 항목을 탐색하고 콘텐츠를 표시할 수 있다
- **SC-005**: 데스크톱, 태블릿, 모바일 3가지 환경에서 레이아웃이 깨지지 않고 정상 표시된다
- **SC-006**: 모든 공개 페이지에 법적 고지사항이 표시된다
